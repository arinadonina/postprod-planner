<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>PostProd Planner</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

<h1>WebApp is alive </h1>
<p id="info"></p>
<button id="btn">Проверить /me</button>

<script>
  const tg = window.Telegram.WebApp;
  tg.expand();

  document.getElementById("info").innerText =
    "initData length: " + tg.initData.length;

  document.getElementById("btn").onclick = async () => {
    const res = await fetch("http://localhost:3000/me", {
      headers: {
        "x-telegram-init-data": tg.initData
      }
    });

    const data = await res.json();
    alert(JSON.stringify(data, null, 2));
  };
</script>

</body>
</html>
